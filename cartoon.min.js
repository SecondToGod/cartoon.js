function draw(cxt,lineWidth,linejoin,borderColor,fillColor){cxt.strokeStyle=borderColor||"";cxt.lineWidth=lineWidth||1;cxt.linejoin=linejoin||"round";cxt.fillStyle=fillColor||"";cxt.fill();cxt.stroke()}function drawLine(mycanvas,x1,y1,x2,y2){var cxt=mycanvas.getContext("2d");cxt.moveTo(x1,y1);cxt.lineTo(x2,y2);draw(cxt,.5,"round","#ccc")}function drawRect(mycanvas,x,y,width,height){var cxt=mycanvas.getContext("2d");cxt.beginPath();cxt.rect(x,y,width,height);draw(cxt,8,"round","light-blue","orange")}function drawRect2(mycanvas,x,y,width,height,lineWidth,linejoin,borderColor,fillColor){var cxt=mycanvas.getContext("2d");cxt.beginPath();cxt.strokeStyle=borderColor||"#eee";cxt.lineWidth=lineWidth||1;cxt.lineJoin=linejoin||"round";cxt.fillStyle=fillColor||"#000";cxt.strokeRect(x,y,width,height);cxt.fillRect(x,y,width,height)}function drawStar(mycanvas,x,y,r,R,rot){var cxt=mycanvas.getContext("2d");var rot=rot||0;cxt.beginPath();for(var i=0;i<5;++i){cxt.lineTo(x+Math.cos((18+rot+72*i)/180*Math.PI)*R,y-Math.sin((18+rot+72*i)/180*Math.PI)*R);cxt.lineTo(x+Math.cos((54+rot+72*i)/180*Math.PI)*r,y-Math.sin((54+rot+72*i)/180*Math.PI)*r)}cxt.closePath();draw(cxt,4,"round","#03b","orange")}function getNewmycanvas(){var backmycanvas=document.createElement("mycanvas");backmycanvas.width=50;backmycanvas.height=50;var bcxt=backmycanvas.getContext("2d");drawStar(bcxt,25,25,10,20,3);return backmycanvas}function roundRectPath(cxt,width,height,radius){var tempH=height-2*radius;var tempW=width-2*radius;cxt.arc(tempW,tempH,radius,0,Math.PI*.5);cxt.lineTo(0,tempH+radius);cxt.arc(0,tempH,radius,.5*Math.PI,Math.PI);cxt.lineTo(-radius,0);cxt.arc(0,0,radius,Math.PI,Math.PI*3/2);cxt.lineTo(tempW,-radius);cxt.arc(tempW,0,radius,Math.PI*3/2,Math.PI*2);cxt.closePath()}function drawRoundRect(mycanvas,x,y,width,height,radius,lineWidth,linejoin,borderColor,fillColor){var cxt=mycanvas.getContext("2d");if(2*radius>width||2*radius>height)return;cxt.beginPath();cxt.translate(x,y);roundRectPath(cxt,width,height,radius);draw(cxt,lineWidth,linejoin,borderColor,fillColor)}function drawArcTo(mycanvas,x0,y0,x1,y1,x2,y2,radius,lineWidth,linejoin,borderColor){var cxt=mycanvas.getContext("2d");cxt.beginPath();cxt.moveTo(x0,y0);cxt.arcTo(x1,y1,x2,y2,radius);draw(cxt,lineWidth,linejoin,borderColor)}function moonPath(cxt,d){cxt.beginPath();cxt.arc(0,0,1,.5*Math.PI,1.5*Math.PI,true);cxt.arcTo(d,0,0,1,dist(0,-1,d,0)/d);cxt.closePath()}function moonPath2(cxt,d){cxt.beginPath();cxt.arc(0,0,1,.5*Math.PI,1.5*Math.PI,true);cxt.quadraticCurveTo(d,0,0,1);cxt.closePath()}function drawMoon(mycanvas,x,y,d,r,rot,lineWidth,linejoin,borderColor,fillColor){var cxt=mycanvas.getContext("2d");cxt.save();cxt.translate(x,y);cxt.scale(r,r);cxt.rotate(rot*Math.PI/180);moonPath2(cxt,d);cxt.restore();draw(cxt,lineWidth,linejoin,borderColor,fillColor)}function drawLand(mycanvas,lineWidth,linejoin,borderColor,fillColor){var cxt=mycanvas.getContext("2d");cxt.save();cxt.beginPath();cxt.moveTo(0,500);cxt.bezierCurveTo(230,400,510,580,800,470);cxt.lineTo(800,600);cxt.lineTo(0,600);cxt.closePath();cxt.restore();var landstyle=cxt.createLinearGradient(0,420,800,600);landstyle.addColorStop(0,"#030");landstyle.addColorStop(1,"#580");draw(cxt,lineWidth,linejoin,borderColor,landstyle)}function dist(x1,y1,x2,y2){return Math.sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))}function drawRandomBalls(mycanvas,num){var cxt=mycanvas.getContext("2d"),balls=[],mycanvasW=mycanvas.width,mycanvasH=mycanvas.height;cxt.globalAlpha=.6;cxt.globalCompositeOperation="xor";for(var j=0;j<num;j++){var R=Math.floor(Math.random()*255),G=Math.floor(Math.random()*255),B=Math.floor(Math.random()*255),aBall={radius:Math.random()*2+3,x:Math.random()*mycanvasW,y:Math.random()*mycanvasH,color:"rgb("+R+","+G+","+B+")",vx:Math.random()*2+.5,vy:Math.random()*2+.5};balls[j]=aBall}setInterval(function(){drawBalls(mycanvas,balls);updateObj(mycanvas,balls)},45)}function updateObj(mycanvas,objArrary){var len=objArrary.length;for(var i=0;i<len;i++){objArrary[i].x+=objArrary[i].vx;objArrary[i].y+=objArrary[i].vy;if(objArrary[i].x-objArrary[i].radius<0){objArrary[i].vx=-objArrary[i].vx;objArrary[i].x=objArrary[i].radius}if(objArrary[i].y-objArrary[i].radius<0){objArrary[i].vy=-objArrary[i].vy;objArrary[i].y=objArrary[i].radius}if(objArrary[i].x+objArrary[i].radius>mycanvas.width){objArrary[i].vx=-objArrary[i].vx;objArrary[i].x=mycanvas.width-objArrary[i].radius}if(objArrary[i].y+objArrary[i].radius>mycanvas.height){objArrary[i].vy=-objArrary[i].vy;objArrary[i].y=mycanvas.height-objArrary[i].radius}}}function drawBalls(mycanvas,objArrary){var len=objArrary.length,cxt=mycanvas.getContext("2d");cxt.clearRect(0,0,mycanvasW,mycanvasH);for(var i=0;i<len;i++){drawParticle(mycanvas,objArrary[i].x,objArrary[i].y,objArrary[i].radius,objArrary[i].color);for(var k=0;k!=i;k++){if(dist(objArrary[k].x,objArrary[k].y,objArrary[i].x,objArrary[i].y)<80){drawLine(mycanvas,objArrary[k].x,objArrary[k].y,objArrary[i].x,objArrary[i].y)}}}}function searchLight(mycanvas,light){var cxt=mycanvas.getContext("2d"),len=light.length;mycanvasW=mycanvas.width,mycanvasH=mycanvas.height;cxt.clearRect(0,0,mycanvasW,mycanvasH);cxt.save();cxt.beginPath();cxt.fillStyle="black";cxt.fillRect(0,0,mycanvasW,mycanvasH);for(i=0;i<len;++i){cxt.beginPath();cxt.arc(light[i].x,light[i].y,light[i].radius,0,Math.PI*2);cxt.fillStyle="#fff";cxt.fill();cxt.clip()}cxt.font="bold 50px Arial";cxt.fillStyle="#058";cxt.fillText("hello cartoon.js!",mycanvasW/3,mycanvasW/2);cxt.restore()}function drawSearchLight(mycanvas,light){var tick=setInterval(function(){updateObj(mycanvas,light);searchLight(mycanvas,light)},40)}function drawStarSky(){var can,ctx,canW,canH,girl=new Image,star=new Image,starObj=function(){this.x;this.y;this.frame;this.gap},num=50,stars=[],gapTime,lastTime;starObj.prototype.init=function(){this.x=Math.random()*(canW-25);this.y=Math.random()*(canH-80);this.frame=Math.floor(Math.random()*7);this.gap=0};starObj.prototype.anime=function(){this.gap+=gapTime;if(this.gap>120){this.frame+=1;this.frame%=7;this.gap=0}};starObj.prototype.drawStar=function(){ctx.drawImage(star,this.frame*7,0,7,7,this.x,this.y,7,7)};function init(){can=document.getElementById("mycanvas");ctx=can.getContext("2d");canW=can.width;canH=can.height;girl.src="src/girl.jpg";star.src="src/star.png";for(var i=0;i<num;i++){var obj=new starObj;obj.init();stars.push(obj)}lastTime=Date.now();frameLoop()}function frameLoop(){window.requestAnimationFrame(frameLoop);var now=Date.now();gapTime=now-lastTime;lastTime=now;drawBackgroud();drawStars()}function drawBackgroud(){ctx.fillStyle="black";ctx.fillRect(0,0,canW,canH)}function drawObj(obj,sx,sy,sWidth,sHeight,x,y,width,height){ctx.drawImage(obj,x,y,width,height)}function drawStars(){for(var i=0;i<num;++i){stars[i].anime();stars[i].drawStar()}}init()}function drawRiver(mycanvas,lineWidth,linejoin,borderColor,fillColor){var cxt=mycanvas.getContext("2d"),mycanvasH=mycanvas.height,riverH=mycanvasH;cxt.clearRect(0,0,mycanvas.width,mycanvas.height);var tick=setInterval(function(){riverH-=10;riverFlowing(mycanvas,riverH,lineWidth,linejoin,borderColor,fillColor)},50)}function riverFlowing(mycanvas,riverH,lineWidth,linejoin,borderColor,fillColor){var cxt=mycanvas.getContext("2d"),mycanvasW=mycanvas.width,mycanvasH=mycanvas.height,riverW=parseInt(mycanvasW/3);cxt.save();cxt.beginPath();cxt.moveTo(0,riverH*.8);cxt.bezierCurveTo(mycanvasW+Math.random()*20,riverH-Math.random()*80,mycanvasW*2+Math.random()*20,riverH+Math.random()*200,mycanvasW*3+Math.random()*80,riverH+Math.random()*120);cxt.lineTo(mycanvasW,mycanvasH);cxt.lineTo(0,mycanvasH);cxt.closePath();cxt.restore();var landstyle=cxt.createLinearGradient(0,riverH,mycanvasW,mycanvasH);landstyle.addColorStop(0,"#07f");landstyle.addColorStop(1,"#04f");draw(cxt,lineWidth,linejoin,"#07f",landstyle)}var cartoon={};function linkTo(mycanvas,x1,y1,x2,y2){var ctx=mycanvas.getContext("2d");ctx.beginPath();ctx.moveTo(x1,y1);var k=(y2-y1)/(x2-x1);var tick=setInterval(function(){console.log(x1,x2);if(k>0){if(x1<x2){ctx.lineTo(x1+=1,y1+=k)}else{ctx.lineTo(x1-=1,y1-=k)}}else{if(x1<x2){ctx.lineTo(x1+=1,y1+=k)}else{ctx.lineTo(x1-=1,y1-=k)}}ctx.stroke();if(x1===x2){clearInterval(tick)}},50)}function drawParticle(ctx,x,y,radius,fillColor){var ctx=mycanvas.getContext("2d");ctx.beginPath();ctx.arc(x,y,radius,0,Math.PI*2);ctx.fillStyle=fillColor;ctx.fill()}function updateParticles(particles,obj,radius,turbulence,life){var len=particles.length;for(var i=0;i<len;++i){var temp=particles[i];temp.x+=temp.vx;temp.y+=temp.vy;temp.life-=1;temp.radius=temp.radius>2?temp.radius-=.4:3;if(temp.life===0||dist(temp.x,temp.y,obj.x,obj.y)>200){particles.splice(i,1);particles.push({radius:Math.random()*turbulence*.7+radius,x:(Math.random()*2-1)*obj.radius*1.1+obj.x,y:(Math.random()*2-1)*turbulence+obj.y,vx:-obj.vx+Math.random()*turbulence-turbulence/2,vy:-obj.vy,life:life})}}}function particleSystem(obj,particles,num,radius,color,turbulence,life){for(var j=0;j<num;j++){var particle={radius:Math.random()*turbulence+radius,x:(Math.random()*2-1)*obj.radius*.6+obj.x,y:(Math.random()*2-1)*turbulence+obj.y,vx:-obj.vx+Math.random()*turbulence-turbulence/2,vy:-obj.vy,life:life};particles[j]=particle}}function jetParticles(mycanvas,num,radius,color,turbulence,life,obj){var ctx=mycanvas.getContext("2d"),turbulence=turbulence||"0",particles=new Array(num),mycanvasW=mycanvas.width,mycanvasH=mycanvas.height;obj.vx=5;obj.vy=3;objArrary=[obj];particleSystem(obj,particles,num,radius,color,turbulence,life);var tock=setInterval(function(){ctx.clearRect(0,0,mycanvasW,mycanvasH);drawParticle(ctx,obj.x,obj.y,obj.radius,color);updateObj(mycanvas,objArrary);for(var i=0;i<num;++i){drawParticle(ctx,particles[i].x,particles[i].y,particles[i].radius,color)}updateParticles(particles,obj,radius,turbulence,life)},60);if(particles.length>500)clearInterval(tock)}

